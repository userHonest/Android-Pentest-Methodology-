
# Burpsuite

## Crafting and converting Burp certiificate to binary and push to phone.

Go to burpsuite and select proxy server and select host and port. export the file as
"certificate.der" 

### Convert from DER to PEM format.

Converting a certificate from DER format to PEM format using OpenSSL and then extracting the subject hash of the certificate.

Conversion from DER to PEM:

DER (Distinguished Encoding Rules) and PEM (Privacy-Enhanced Mail) are different encoding formats for X.509 certificates. PEM is a Base64 encoded ASCII format that is often used because it is easier to work with in text editors and command-line tools.
Conversion is necessary when a tool or process requires a certificate in a specific format.
Extracting the Subject Hash:

The subject hash is often used for quick lookups of certificates. It is a shortened version of the certificate's subject distinguished name (DN) and is useful in certificate management tasks.
This hash can be used to identify the certificate in certificate stores or databases.
By following these steps, you can convert a DER-encoded certificate to a PEM-encoded one and then extract a hash value that uniquely identifies the certificate's subject.

In the same directory where you have the bursuite certificate.

Convert DER to PEM Format

`openssl x509 -inform DER -in burpCert.der -out burpCert.pem`

Extract the Subject Hash

`openssl x509 -inform PEM -subject_hash_old -in burpCert.pem |head -1`

then

`mv burpCert.pem 9a5ba575.0`


## Pushing the certificate to the phone

Step 1 

`adb push 9a5ba575.0 /sdcard`

Step 2

Navigate ti the SD card to confirm if the file is pushed to the card.

```
genymotion:/ # cd sdcard
genymotion:/sdcard # ls

9a5ba575.0  Android  Download  Music          Pictures  Ringtones  
Alarms      DCIM     Movies    Notifications  Podcasts  

genymotion:/sdcard # 
130|genymotion:/sdcard # exit

```

Then remount

`adb remount`

Step 3

"sudo su" to root
Moving the binary to /system/etc/security/cacerts/ and make it executable.

```
adb shell

genymotion:/ # cd sdcard

genymotion:/sdcard # ls
9a5ba575.0  Android  Download  Music          Pictures  Ringtones  
Alarms      DCIM     Movies    Notifications  Podcasts  

genymotion:/sdcard # mv 9a5ba575.0 /system/etc/security/cacerts/

genymotion:/sdcard # cd /system/etc/security/cacerts/

genymotion:/system/etc/security/cacerts #

genymotion:/system/etc/security/cacerts # chmod 664 9a5ba575.0

genymotion:/system/etc/security/cacerts # reboot

```

## Reverse proxy to Burpsuite

Open genymotion
open a terminal and write

`adb shell settings put global http_proxy localhost:3333`

`adb reverse tcp:3333 tcp:8080`

The open burp and launch the app from genymotion. You should see the app traffic. 
